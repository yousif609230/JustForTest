{
  "function_name": "yusuf-test",
  "env": {
    "EKYC_FETCH_WATHIQ_DATA_MOCK_URL": "run.mocky.io/v8/bc55ba4a-fbe2-4035-847b-5bfab73ef5b0"
  }
}


import boto3
import json

def update_lambda_environment(lambda_function_name, environment_variables):
    # Create Lambda client
    lambda_client = boto3.client('lambda')

    # Get current configuration
    try:
        response = lambda_client.get_function_configuration(FunctionName=lambda_function_name)
        current_environment_variables = response['Environment']['Variables']

    except:
        return {
           'statusCode': 404,
           'body': "function could not be found"
        }
    
    # Update environment variables
    current_environment_variables.update(environment_variables)

    # Update Lambda function configuration
    response = lambda_client.update_function_configuration(
        FunctionName=lambda_function_name,
        Environment={
            'Variables': current_environment_variables
        }
    )

    return "Environment variables updated successfully"

def lambda_handler(event, context):
    print(event)
    #Example usage
    lambda_function_name = event['function_name']
    environment_variables = event['env'] #{
#        'test': 'no124',
#    }

    response = update_lambda_environment(lambda_function_name, environment_variables)
    return {
        'statusCode': 200,
        'body': response
    }


